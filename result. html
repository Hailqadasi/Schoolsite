 <!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Ø§Ù„Ù†ØªÙŠØ¬Ø© Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠØ©</title>

<style>
body{
    font-family:tahoma;
    background:linear-gradient(to bottom,#0b3d91,#1e50a2);
    text-align:center;
    color:white;
    padding-top:100px;
}
.box{
    background:white;
    color:black;
    width:350px;
    margin:auto;
    padding:25px;
    border-radius:15px;
}
button{
    margin-top:10px;
    padding:10px 20px;
    font-size:16px;
    background:#0b3d91;
    color:white;
    border:none;
    border-radius:8px;
    cursor:pointer;
}
button:hover{
    background:#062b66;
}
.score{
    font-size:22px;
    margin:15px 0;
    font-weight:bold;
}
</style>
</head>
<body>

<h1>Ø§Ù„Ù†ØªÙŠØ¬Ø© Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠØ©</h1>

<div class="box">
    <div id="phone"></div>
    <div class="score" id="score"></div>
    <div id="message"></div>

    <button onclick="viewLeaderboard()">Ø¹Ø±Ø¶ Ù„ÙˆØ­Ø© Ø§Ù„ØµØ¯Ø§Ø±Ø©</button>
    <button onclick="playAgain()">Ø¥Ø¹Ø§Ø¯Ø© Ø§Ù„Ù„Ø¹Ø¨</button>
    <button onclick="goHome()">Ø§Ù„ØµÙØ­Ø© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©</button>
</div>

<script>
let phone = localStorage.getItem("playerPhone");
let score = localStorage.getItem("finalScore");

if(!phone || score === null){
    window.location.href = "index.html";
}

score = parseInt(score);

document.getElementById("phone").innerText = "Ø±Ù‚Ù… Ø§Ù„Ù…ØªØ³Ø§Ø¨Ù‚: " + phone;
document.getElementById("score").innerText = "Ù…Ø¬Ù…ÙˆØ¹ Ø§Ù„Ù†Ù‚Ø§Ø·: " + score;

// Ø±Ø³Ø§Ù„Ø© Ø­Ø³Ø¨ Ø§Ù„Ù†Ù‚Ø§Ø·
let message = "";

if(score >= 50){
    message = "ğŸ† Ø£Ø¯Ø§Ø¡ Ù…Ù…ØªØ§Ø²! Ø£Ù†Øª Ø¨Ø·Ù„ Ø§Ù„Ù…Ø³Ø§Ø¨Ù‚Ø©!";
}else if(score >= 30){
    message = "ğŸ‘ Ø£Ø¯Ø§Ø¡ Ø¬ÙŠØ¯ Ø¬Ø¯Ø§Ù‹!";
}else if(score >= 10){
    message = "ğŸ‘ Ù†ØªÙŠØ¬Ø© Ø¬ÙŠØ¯Ø©ØŒ Ø­Ø§ÙˆÙ„ Ù…Ø±Ø© Ø£Ø®Ø±Ù‰!";
}else{
    message = "ğŸ˜… Ø­Ø¸ Ø£ÙˆÙØ± ÙÙŠ Ø§Ù„Ù…Ø±Ø© Ø§Ù„Ù‚Ø§Ø¯Ù…Ø©!";
}

document.getElementById("message").innerText = message;

/* ===== Ø­ÙØ¸ Ø§Ù„Ù†ØªÙŠØ¬Ø© ÙÙŠ Ù„ÙˆØ­Ø© Ø§Ù„ØµØ¯Ø§Ø±Ø© ===== */

let leaderboard = JSON.parse(localStorage.getItem("leaderboard")) || [];

// Ù…Ù†Ø¹ ØªÙƒØ±Ø§Ø± Ù†ÙØ³ Ø§Ù„Ø±Ù‚Ù… (Ù†Ø­ØªÙØ¸ Ø¨Ø£Ø¹Ù„Ù‰ Ù†ØªÙŠØ¬Ø© ÙÙ‚Ø·)
let existingPlayer = leaderboard.find(player => player.phone === phone);

if(existingPlayer){
    if(score > existingPlayer.score){
        existingPlayer.score = score;
    }
}else{
    leaderboard.push({
        phone: phone,
        score: score,
        date: new Date().toLocaleString()
    });
}

// ØªØ±ØªÙŠØ¨ ØªÙ†Ø§Ø²Ù„ÙŠ Ø­Ø³Ø¨ Ø§Ù„Ù†Ù‚Ø§Ø·
leaderboard.sort((a,b) => b.score - a.score);

// Ø­ÙØ¸ Ø£ÙØ¶Ù„ 10 Ù„Ø§Ø¹Ø¨ÙŠÙ† ÙÙ‚Ø·
leaderboard = leaderboard.slice(0,10);

localStorage.setItem("leaderboard", JSON.stringify(leaderboard));

/* ===== Ø§Ù„Ø£Ø²Ø±Ø§Ø± ===== */

function viewLeaderboard(){
    window.location.href = "leaderboard.html";
}

function playAgain(){
    localStorage.removeItem("finalScore");
    window.location.href = "game.html";
}

function goHome(){
    localStorage.removeItem("finalScore");
    window.location.href = "index.html";
}
</script>

</body>
</html>
